(()=>{var e={};e.id=558,e.ids=[558],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},26373:(e,t,s)=>{"use strict";s.d(t,{V:()=>o});var a=s(60687);s(43210);var r=s(43967),i=s(74158),n=s(72631),d=s(4780),l=s(29523);function o({className:e,classNames:t,showOutsideDays:s=!0,...o}){return(0,a.jsx)(n.hv,{showOutsideDays:s,className:(0,d.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,d.cn)((0,l.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,d.cn)((0,l.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:e,...t})=>(0,a.jsx)(r.A,{className:(0,d.cn)("h-4 w-4",e),...t}),IconRight:({className:e,...t})=>(0,a.jsx)(i.A,{className:(0,d.cn)("h-4 w-4",e),...t})},...o})}o.displayName="Calendar"},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40988:(e,t,s)=>{"use strict";s.d(t,{AM:()=>d,Wv:()=>l,hl:()=>o});var a=s(60687),r=s(43210),i=s(52676),n=s(4780);let d=i.bL,l=i.l9,o=r.forwardRef(({className:e,align:t="center",sideOffset:s=4,...r},d)=>(0,a.jsx)(i.ZL,{children:(0,a.jsx)(i.UC,{ref:d,align:t,sideOffset:s,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));o.displayName=i.UC.displayName},45746:(e,t,s)=>{Promise.resolve().then(s.bind(s,88451))},54987:(e,t,s)=>{"use strict";s.d(t,{d:()=>d});var a=s(60687),r=s(43210),i=s(90270),n=s(4780);let d=r.forwardRef(({className:e,...t},s)=>(0,a.jsx)(i.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:(0,a.jsx)(i.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));d.displayName=i.bL.displayName},55511:e=>{"use strict";e.exports=require("crypto")},60738:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/achievements/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/achievements/page.tsx","default")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63684:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>o});var a=s(65239),r=s(48088),i=s(88170),n=s.n(i),d=s(30893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o={children:["",{children:["dashboard",{children:["achievements",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,60738)),"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/achievements/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63144)),"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/Users/Terry/Downloads/zilvdaka-main 2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/achievements/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/achievements/page",pathname:"/dashboard/achievements",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},64718:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Brush",[["path",{d:"m9.06 11.9 8.07-8.06a2.85 2.85 0 1 1 4.03 4.03l-8.06 8.08",key:"1styjt"}],["path",{d:"M7.07 14.94c-1.66 0-3 1.35-3 3.02 0 1.33-2.5 1.52-2 2.02 1.08 1.1 2.49 2.02 4 2.02 2.2 0 4-1.8 4-4.04a3.01 3.01 0 0 0-3-3.02z",key:"z0l1mu"}]])},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},76457:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]])},79551:e=>{"use strict";e.exports=require("url")},82698:(e,t,s)=>{Promise.resolve().then(s.bind(s,60738))},85535:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(82614).A)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},88451:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>V});var a=s(60687),r=s(30927),i=s(4780),n=s(73437),d=s(916),l=s(76457),o=s(64718),c=s(82614);let u=(0,c.A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var h=s(53098),m=s(2093);let p=(0,c.A)("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]),x=(0,c.A)("Mountain",[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]]),y=(0,c.A)("Flower",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M12 16.5A4.5 4.5 0 1 1 7.5 12 4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 1 1 4.5 4.5 4.5 4.5 0 1 1-4.5 4.5",key:"14wa3c"}],["path",{d:"M12 7.5V9",key:"1oy5b0"}],["path",{d:"M7.5 12H9",key:"eltsq1"}],["path",{d:"M16.5 12H15",key:"vk5kw4"}],["path",{d:"M12 16.5V15",key:"k7eayi"}],["path",{d:"m8 8 1.88 1.88",key:"nxy4qf"}],["path",{d:"M14.12 9.88 16 8",key:"1lst6k"}],["path",{d:"m8 16 1.88-1.88",key:"h2eex1"}],["path",{d:"M14.12 14.12 16 16",key:"uqkrx3"}]]),g=(0,c.A)("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),v=(0,c.A)("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);var f=s(69861),j=s(85535),k=s(89981),b=s(29523),w=s(30474);let N={Star:d.A,Book:l.A,Brush:o.A,ShieldCheck:u,Trophy:h.A,Zap:m.A,Swords:p,Mountain:x,Flower:y,Gem:g,Bug:v},C=({name:e,...t})=>{let s=N[e];return s?(0,a.jsx)(s,{...t}):(0,a.jsx)(d.A,{...t})};function A({achievement:e,onEdit:t,index:s}){let r=e.imageUrl&&""!==e.imageUrl.trim(),d=e.id.startsWith("custom-"),l=(()=>{let t=e.tasksRequired,s=e.daysRequired;return t&&t>0&&s&&s>0?(0,a.jsx)(k.C,{tKey:"settings.parentalControls.tasksAndDaysToComplete",tOptions:{tasksCount:t,daysCount:s}}):t&&t>0?(0,a.jsx)(k.C,{tKey:"settings.parentalControls.tasksToComplete",tOptions:{count:t}}):s&&s>0?(0,a.jsx)(k.C,{tKey:"settings.parentalControls.daysToComplete",tOptions:{count:s}}):null})();return(0,a.jsxs)("div",{className:(0,i.cn)("relative flex flex-col items-center justify-start text-center aspect-square rounded-xl transition-all duration-300 transform hover:scale-105 p-4 group",e.unlocked?"bg-accent/20 border-2 border-accent/50 shadow-lg shadow-accent/10":"bg-muted/50"),children:[e.unlocked&&(0,a.jsx)("div",{className:"absolute inset-0 bg-grid-slate-100 [mask-image:linear-gradient(0deg,#fff,rgba(255,255,255,0.6))] dark:bg-grid-slate-700/25 dark:[mask-image:linear-gradient(0deg,rgba(255,255,0.1),rgba(255,255,0.5))]"}),(0,a.jsx)(b.$,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-7 w-7 z-20 opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>{s.stopPropagation(),s.preventDefault(),t(e)},children:(0,a.jsx)(f.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:(0,i.cn)("relative mx-auto flex h-20 w-20 items-center justify-center rounded-full z-10 overflow-hidden",e.unlocked?"bg-accent/20":"bg-secondary"),children:[e.unlocked&&(0,a.jsx)("div",{className:"absolute inset-0 animate-pulse rounded-full bg-accent opacity-30"}),r?(0,a.jsx)(w.default,{src:e.imageUrl,alt:e.title,width:80,height:80,className:(0,i.cn)("object-cover h-full w-full z-10",e.unlocked?"":"grayscale")}):(0,a.jsx)(C,{name:e.icon,className:(0,i.cn)("h-10 w-10 z-10",e.unlocked?"text-accent-foreground":"text-muted-foreground")}),!e.unlocked&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 rounded-full",children:(0,a.jsx)(j.A,{className:"h-8 w-8 text-white/70"})})]}),(0,a.jsxs)("div",{className:"flex flex-col flex-grow justify-center mt-2 z-10",children:[(0,a.jsx)("p",{className:"font-bold text-sm text-foreground leading-tight",children:d?e.title:(0,a.jsx)(k.C,{tKey:`achievements.items.${e.id}.title`})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 px-1",children:d?e.description:(0,a.jsx)(k.C,{tKey:`achievements.items.${e.id}.description`})}),!e.unlocked&&l&&(0,a.jsx)("p",{className:"text-xs font-semibold text-primary mt-1.5 px-1",children:l})]}),e.unlocked&&e.dateUnlocked&&(0,a.jsx)("div",{className:"w-full mt-auto z-10 pt-1",children:(0,a.jsxs)("p",{className:"text-[10px] text-muted-foreground w-full",children:[(0,a.jsx)(k.C,{tKey:"achievements.unlockedOn"}),": ",(0,n.GP)(new Date(e.dateUnlocked),"MMM d, yyyy")]})})]})}var q=s(43210),M=s(85726),z=s(63503),P=s(89667),U=s(80013),_=s(54987);let R=q.forwardRef(({className:e,...t},s)=>(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));R.displayName="Textarea";var K=s(15079),S=s(40988),D=s(26373),E=s(16032),T=s(19422),F=s(26622),G=s(57207);let O=["Star","Book","Brush","ShieldCheck","Trophy","Zap","Swords","Mountain","Flower","Gem","Bug","Pause","Play"],L={Star:d.A,Book:l.A,Brush:o.A,ShieldCheck:u,Trophy:h.A,Zap:m.A,Swords:p,Mountain:x,Flower:y,Gem:g,Bug:v,Pause:E.A,Play:T.A},B=({name:e,...t})=>{let s=L[e];return s?(0,a.jsx)(s,{...t}):(0,a.jsx)(d.A,{...t})},$={title:"",description:"",icon:"Star",imageUrl:"",unlocked:!1,dateUnlocked:void 0,tasksRequired:void 0,daysRequired:void 0};function H({isOpen:e,setIsOpen:t,achievement:s,onSave:r,onDelete:d}){let[l,o]=(0,q.useState)($),c=null===s,u=(e,t)=>{o(s=>({...s,[e]:t}))};return(0,a.jsx)(z.lG,{open:e,onOpenChange:t,children:(0,a.jsxs)(z.Cf,{className:"sm:max-w-md",children:[(0,a.jsxs)(z.c7,{children:[(0,a.jsx)(z.L3,{children:(0,a.jsx)(k.C,{tKey:c?"achievements.add.title":"achievements.edit.title"})}),(0,a.jsx)(z.rr,{children:(0,a.jsx)(k.C,{tKey:c?"achievements.add.description":"achievements.edit.description"})})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(U.J,{htmlFor:"title",className:"text-right",children:(0,a.jsx)(k.C,{tKey:"achievements.edit.name"})}),(0,a.jsx)(P.p,{id:"title",value:l.title,onChange:e=>u("title",e.target.value),className:"col-span-3"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-start gap-4",children:[(0,a.jsx)(U.J,{htmlFor:"description",className:"text-right pt-2",children:(0,a.jsx)(k.C,{tKey:"achievements.edit.descriptionLabel"})}),(0,a.jsx)(R,{id:"description",value:l.description,onChange:e=>u("description",e.target.value),className:"col-span-3"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(U.J,{htmlFor:"icon",className:"text-right",children:(0,a.jsx)(k.C,{tKey:"achievements.edit.icon"})}),(0,a.jsxs)(K.l6,{value:l.icon,onValueChange:e=>u("icon",e),children:[(0,a.jsx)(K.bq,{className:"col-span-3",children:(0,a.jsx)(K.yv,{placeholder:(0,a.jsx)(k.C,{tKey:"achievements.edit.selectIcon"})})}),(0,a.jsx)(K.gC,{children:O.map(e=>(0,a.jsx)(K.eb,{value:e,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(B,{name:e,className:"h-4 w-4"}),(0,a.jsx)("span",{children:e})]})},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(U.J,{htmlFor:"imageUrl",className:"text-right",children:(0,a.jsx)(k.C,{tKey:"achievements.edit.imageUrl"})}),(0,a.jsx)(P.p,{id:"imageUrl",value:l.imageUrl||"",onChange:e=>u("imageUrl",e.target.value),className:"col-span-3",placeholder:"https://example.com/image.png"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(U.J,{htmlFor:"tasksRequired",className:"text-right",children:"任务数量"}),(0,a.jsx)(P.p,{id:"tasksRequired",type:"number",value:l.tasksRequired||"",onChange:e=>u("tasksRequired",e.target.value),className:"col-span-3",placeholder:"例如: 5"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(U.J,{htmlFor:"daysRequired",className:"text-right",children:"天数"}),(0,a.jsx)(P.p,{id:"daysRequired",type:"number",value:l.daysRequired||"",onChange:e=>u("daysRequired",e.target.value),className:"col-span-3",placeholder:"例如: 3"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(U.J,{htmlFor:"unlocked",className:"text-right",children:(0,a.jsx)(k.C,{tKey:"achievements.edit.unlocked"})}),(0,a.jsx)(_.d,{id:"unlocked",checked:l.unlocked,onCheckedChange:e=>u("unlocked",e),className:"justify-self-start"})]}),l.unlocked&&(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(U.J,{htmlFor:"dateUnlocked",className:"text-right",children:(0,a.jsx)(k.C,{tKey:"achievements.edit.date"})}),(0,a.jsxs)(S.AM,{children:[(0,a.jsx)(S.Wv,{asChild:!0,children:(0,a.jsxs)(b.$,{variant:"outline",className:(0,i.cn)("col-span-3 justify-start text-left font-normal",!l.dateUnlocked&&"text-muted-foreground"),children:[(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4"}),l.dateUnlocked?(0,n.GP)(new Date(l.dateUnlocked),"PPP"):(0,a.jsx)("span",{children:(0,a.jsx)(k.C,{tKey:"achievements.edit.pickDate"})})]})}),(0,a.jsx)(S.hl,{className:"w-auto p-0",children:(0,a.jsx)(D.V,{mode:"single",selected:l.dateUnlocked?new Date(l.dateUnlocked):void 0,onSelect:e=>u("dateUnlocked",e),initialFocus:!0})})]})]})]}),(0,a.jsxs)(z.Es,{className:"sm:justify-between",children:[c?(0,a.jsx)("div",{}):(0,a.jsxs)(b.$,{variant:"ghost",className:"text-destructive hover:text-destructive justify-self-start mr-auto",onClick:()=>{s&&(d(s),t(!1))},children:[(0,a.jsx)(G.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)(k.C,{tKey:"achievements.edit.delete"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(z.HM,{asChild:!0,children:(0,a.jsx)(b.$,{type:"button",variant:"secondary",children:(0,a.jsx)(k.C,{tKey:"achievements.edit.cancel"})})}),(0,a.jsx)(b.$,{type:"button",onClick:()=>{r({id:s?.id||`custom-${Date.now()}`,title:l.title||"Untitled",description:l.description||"",icon:l.icon||"Star",imageUrl:l.imageUrl||"",unlocked:l.unlocked||!1,dateUnlocked:l.unlocked?l.dateUnlocked||new Date:void 0,tasksRequired:l.tasksRequired?Number(l.tasksRequired):void 0,daysRequired:l.daysRequired?Number(l.daysRequired):void 0}),t(!1)},children:(0,a.jsx)(k.C,{tKey:"achievements.edit.save"})})]})]})]})})}var J=s(35265),I=s(13972);function V(){let[e,t]=(0,q.useState)([]),[i,n]=(0,q.useState)(!1),[d,l]=(0,q.useState)(!1),[o,c]=(0,q.useState)(null),[u,h]=(0,q.useState)(null),m=e=>{c(e),l(!0)},p=async()=>{if(u){let a=e.filter(e=>e.id!==u.id),{getStorageStatus:r}=await s.e(940).then(s.bind(s,35940)),i=await r();if("db"===i||"kv"===i){let{updateAchievements:e}=await s.e(940).then(s.bind(s,35940));await e(a)}else{let{updateClientAchievements:e}=await Promise.resolve().then(s.bind(s,24571));await e(a)}t(a),h(null)}},x=async a=>{let r;r=e.some(e=>e.id===a.id)?e.map(e=>e.id===a.id?a:e):[...e,a];let{getStorageStatus:i}=await s.e(940).then(s.bind(s,35940)),n=await i();if("db"===n||"kv"===n){let{updateAchievements:e}=await s.e(940).then(s.bind(s,35940));await e(r)}else{let{updateClientAchievements:e}=await Promise.resolve().then(s.bind(s,24571));await e(r)}t(r)},y=e.filter(e=>e.unlocked).length,g=e.length;return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("header",{className:"sticky top-0 z-10 flex h-[57px] items-center justify-between gap-1 bg-background px-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 w-1/2",children:[(0,a.jsx)(r.x2,{className:"md:hidden"}),(0,a.jsx)("h1",{className:"text-xl font-semibold truncate",children:(0,a.jsx)(k.C,{tKey:"achievements.title"})})]}),(0,a.jsx)("div",{className:"flex items-center justify-end gap-4 w-1/2",children:i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-sm font-semibold text-muted-foreground text-right",children:(0,a.jsx)(k.C,{tKey:"achievements.unlocked",tOptions:{unlockedCount:y,totalCount:g}})}),(0,a.jsxs)(b.$,{size:"sm",onClick:()=>{c(null),l(!0)},children:[(0,a.jsx)(J.A,{className:"mr-2 h-4 w-4"}),(0,a.jsx)(k.C,{tKey:"achievements.add.button"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.E,{className:"h-5 w-24"}),(0,a.jsx)(M.E,{className:"h-9 w-28"})]})})]}),(0,a.jsx)("main",{className:"flex-1 p-4 md:p-8",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6",children:[!i&&Array.from({length:10}).map((e,t)=>(0,a.jsx)(M.E,{className:"aspect-square rounded-xl"},t)),i&&e.map((e,t)=>(0,a.jsx)(A,{achievement:e,onEdit:m,index:t},e.id))]})})}),i&&(0,a.jsx)(H,{isOpen:d,setIsOpen:l,achievement:o,onSave:x,onDelete:e=>{h(e)}}),(0,a.jsx)(I.Lt,{open:!!u,onOpenChange:e=>!e&&h(null),children:(0,a.jsxs)(I.EO,{children:[(0,a.jsxs)(I.wd,{children:[(0,a.jsx)(I.r7,{children:(0,a.jsx)(k.C,{tKey:"achievements.delete.title"})}),(0,a.jsx)(I.$v,{children:(0,a.jsx)(k.C,{tKey:"achievements.delete.description"})})]}),(0,a.jsxs)(I.ck,{children:[(0,a.jsx)(I.Zr,{children:(0,a.jsx)(k.C,{tKey:"achievements.edit.cancel"})}),(0,a.jsx)(I.Rx,{onClick:p,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:(0,a.jsx)(k.C,{tKey:"achievements.delete.confirm"})})]})]})})]})}},90270:(e,t,s)=>{"use strict";s.d(t,{bL:()=>b,zi:()=>w});var a=s(43210),r=s(70569),i=s(98599),n=s(11273),d=s(65551),l=s(83721),o=s(18853),c=s(3416),u=s(60687),h="Switch",[m,p]=(0,n.A)(h),[x,y]=m(h),g=a.forwardRef((e,t)=>{let{__scopeSwitch:s,name:n,checked:l,defaultChecked:o,required:h,disabled:m,value:p="on",onCheckedChange:y,form:g,...v}=e,[f,b]=a.useState(null),w=(0,i.s)(t,e=>b(e)),N=a.useRef(!1),C=!f||g||!!f.closest("form"),[A=!1,q]=(0,d.i)({prop:l,defaultProp:o,onChange:y});return(0,u.jsxs)(x,{scope:s,checked:A,disabled:m,children:[(0,u.jsx)(c.sG.button,{type:"button",role:"switch","aria-checked":A,"aria-required":h,"data-state":k(A),"data-disabled":m?"":void 0,disabled:m,value:p,...v,ref:w,onClick:(0,r.m)(e.onClick,e=>{q(e=>!e),C&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),C&&(0,u.jsx)(j,{control:f,bubbles:!N.current,name:n,value:p,checked:A,required:h,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});g.displayName=h;var v="SwitchThumb",f=a.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,r=y(v,s);return(0,u.jsx)(c.sG.span,{"data-state":k(r.checked),"data-disabled":r.disabled?"":void 0,...a,ref:t})});f.displayName=v;var j=e=>{let{control:t,checked:s,bubbles:r=!0,...i}=e,n=a.useRef(null),d=(0,l.Z)(s),c=(0,o.X)(t);return a.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==s&&t){let a=new Event("click",{bubbles:r});t.call(e,s),e.dispatchEvent(a)}},[d,s,r]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...i,tabIndex:-1,ref:n,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function k(e){return e?"checked":"unchecked"}var b=g,w=f}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[447,168,658,970,390,977,130,353,298,968],()=>s(63684));module.exports=a})();