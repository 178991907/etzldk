(()=>{var e={};e.id=358,e.ids=[358],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29428:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/rewards/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/rewards/page.tsx","default")},33873:e=>{"use strict";e.exports=require("path")},44493:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>l,wL:()=>p});var r=s(60687),a=s(43210),i=s(4780);let n=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let p=a.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t}));p.displayName="CardFooter"},49560:(e,t,s)=>{Promise.resolve().then(s.bind(s,63144))},51974:(e,t,s)=>{Promise.resolve().then(s.bind(s,73542))},55511:e=>{"use strict";e.exports=require("crypto")},59288:(e,t,s)=>{Promise.resolve().then(s.bind(s,63902))},60222:(e,t,s)=>{Promise.resolve().then(s.bind(s,29428))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63144:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/layout.tsx","default")},63902:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var r=s(60687);s(43210);var a=s(30927),i=s(89981);function n({children:e}){return(0,r.jsxs)(a.GB,{children:[(0,r.jsx)(a.Bx,{children:(0,r.jsx)(i.A,{})}),(0,r.jsx)(a.sF,{children:(0,r.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,r.jsx)("div",{className:"flex-1 flex flex-col",children:e}),(0,r.jsx)("footer",{className:"py-4 text-center text-xl text-muted-foreground",children:(0,r.jsx)("a",{href:"https://web.terry.dpdns.org/",target:"_blank",rel:"noopener noreferrer",className:"hover:text-primary transition-colors",children:"\xa9 2025 英语全科启蒙. All Rights Reserved.『Terry开发与维护』"})})]})})]})}},69861:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(82614).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},70440:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(31658);let a=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},73542:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var r=s(60687),a=s(30927),i=s(44493),n=s(29523),l=s(89667),d=s(80013),o=s(89981),c=s(63503),p=s(35265),x=s(69861),m=s(57207),u=s(43210),h=s(16457),g=s(85726);function f(){let{t:e}=(0,h.Bd)(),[t,f]=(0,u.useState)([]),[w,j]=(0,u.useState)(!1),[v,y]=(0,u.useState)(null),[b,C]=(0,u.useState)(""),[N,k]=(0,u.useState)(""),[R,P]=(0,u.useState)(""),[q,D]=(0,u.useState)(""),[K,z]=(0,u.useState)(!1),T=e=>{let t=e.tasksRequired,s=e.daysRequired;return t&&t>0&&s&&s>0?{tKey:"settings.parentalControls.tasksAndDaysToComplete",tOptions:{tasksCount:t,daysCount:s}}:t&&t>0?{tKey:"settings.parentalControls.tasksToComplete",tOptions:{count:t}}:s&&s>0?{tKey:"settings.parentalControls.daysToComplete",tOptions:{count:s}}:{tKey:"settings.parentalControls.noRequirement"}},_=e=>{y(e),C(e.title),k(e.description),P(e.tasksRequired?.toString()||""),D(e.daysRequired?.toString()||""),j(!0)},A=async()=>{if(!b.trim())return;let{getStorageStatus:e}=await s.e(940).then(s.bind(s,35940)),t=await e(),r="db"===t||"kv"===t;if(v){let e={...v,title:b.trim(),description:N.trim(),tasksRequired:R?parseInt(R,10):void 0,daysRequired:q?parseInt(q,10):void 0};if(r){let{updateReward:t}=await s.e(940).then(s.bind(s,35940));await t(e)}else{let{updateClientReward:t}=await Promise.resolve().then(s.bind(s,24571));await t(e)}}else{let e={id:`reward-${Date.now()}`,userId:"user_2fP7sW5gR8zX9yB1eA6vC4jK0lM",title:b.trim(),description:N.trim(),icon:"Gift",tasksRequired:R?parseInt(R,10):void 0,daysRequired:q?parseInt(q,10):void 0};if(r){let{addReward:t}=await s.e(940).then(s.bind(s,35940));await t(e)}else{let{addClientReward:t}=await Promise.resolve().then(s.bind(s,24571));await t(e)}}C(""),k(""),P(""),D(""),j(!1),y(null);let{getStorageStatus:a}=await s.e(940).then(s.bind(s,35940)),i=await a();if("db"===i||"kv"===i){let{getRewards:e}=await s.e(940).then(s.bind(s,35940));f(await e())}else{let{getClientRewards:e}=await Promise.resolve().then(s.bind(s,24571));f(await e())}},S=async e=>{let{getStorageStatus:t}=await s.e(940).then(s.bind(s,35940)),r=await t();if("db"===r||"kv"===r){let{deleteReward:t}=await s.e(940).then(s.bind(s,35940));await t(e);let{getRewards:r}=await s.e(940).then(s.bind(s,35940));f(await r())}else{let{deleteClientReward:t}=await Promise.resolve().then(s.bind(s,24571));await t(e)}};return K?(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("header",{className:"sticky top-0 z-10 flex h-[57px] items-center justify-between gap-1 bg-background px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-1 w-full",children:[(0,r.jsx)(a.x2,{className:"md:hidden"}),(0,r.jsx)("h1",{className:"text-xl font-semibold truncate",children:(0,r.jsx)(o.C,{tKey:"rewards.title"})})]})}),(0,r.jsx)("main",{className:"flex-1 p-4 md:p-8",children:(0,r.jsx)(i.Zp,{children:(0,r.jsxs)(i.Wu,{className:"space-y-4 pt-6",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)(i.ZB,{children:(0,r.jsx)(o.C,{tKey:"settings.parentalControls.rewardSystem"})}),(0,r.jsx)(i.BT,{className:"mb-4",children:(0,r.jsx)(o.C,{tKey:"settings.parentalControls.rewardSystemDescription"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,r.jsxs)(c.lG,{open:w,onOpenChange:j,children:[(0,r.jsx)(c.zM,{asChild:!0,children:(0,r.jsxs)(n.$,{onClick:()=>{y(null),C(""),k(""),P(""),D(""),j(!0)},children:[(0,r.jsx)(p.A,{className:"mr-2 h-4 w-4"}),(0,r.jsx)(o.C,{tKey:"settings.parentalControls.addReward"})]})}),(0,r.jsxs)(c.Cf,{className:"sm:max-w-[425px]",children:[(0,r.jsxs)(c.c7,{children:[(0,r.jsx)(c.L3,{children:v?(0,r.jsx)(o.C,{tKey:"settings.parentalControls.editRewardDialog.title"}):(0,r.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.title"})}),(0,r.jsx)(i.BT,{children:(0,r.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.description"})})]}),(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(d.J,{htmlFor:"reward-name",className:"text-right",children:(0,r.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.rewardName"})}),(0,r.jsx)(l.p,{id:"reward-name",placeholder:e("settings.parentalControls.addRewardDialog.rewardNamePlaceholder"),className:"col-span-3",value:b,onChange:e=>C(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(d.J,{htmlFor:"reward-description",className:"text-right",children:(0,r.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.rewardDescription"})}),(0,r.jsx)(l.p,{id:"reward-description",placeholder:e("settings.parentalControls.addRewardDialog.rewardDescriptionPlaceholder"),className:"col-span-3",value:N,onChange:e=>k(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(d.J,{htmlFor:"tasks-required",className:"text-right",children:(0,r.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.tasksRequired"})}),(0,r.jsx)(l.p,{id:"tasks-required",type:"number",placeholder:"5",className:"col-span-3",value:R,onChange:e=>P(e.target.value)})]}),(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(d.J,{htmlFor:"days-required",className:"text-right",children:(0,r.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.daysRequired"})}),(0,r.jsx)(l.p,{id:"days-required",type:"number",placeholder:"3",className:"col-span-3",value:q,onChange:e=>D(e.target.value)})]})]}),(0,r.jsx)(c.Es,{children:(0,r.jsx)(n.$,{type:"submit",onClick:A,children:v?(0,r.jsx)(o.C,{tKey:"settings.parentalControls.editRewardDialog.saveButton"}):(0,r.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.createButton"})})})]})]})}),(0,r.jsx)("div",{className:"space-y-2 rounded-md border p-2",children:t.length>0?t.map((e,t)=>{let{tKey:s,tOptions:a}=T(e);return(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-muted/50 group",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.title}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.description&&e.description.trim()?e.description+" - ":""," ",(0,r.jsx)(o.C,{tKey:s,tOptions:a})]})]}),(0,r.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,r.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>_(e),children:(0,r.jsx)(x.A,{className:"h-4 w-4"})}),(0,r.jsx)(n.$,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>S(e.id),children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})]},t)}):(0,r.jsx)("p",{className:"text-center text-muted-foreground p-4",children:(0,r.jsx)(o.C,{tKey:"settings.parentalControls.noRewards"})})})]})]})})})]}):(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("header",{className:"sticky top-0 z-10 flex h-[57px] items-center justify-between gap-1 bg-background px-4",children:(0,r.jsxs)("div",{className:"flex items-center gap-1 w-full",children:[(0,r.jsx)(a.x2,{className:"md:hidden"}),(0,r.jsx)("h1",{className:"text-xl font-semibold truncate",children:(0,r.jsx)(o.C,{tKey:"rewards.title"})})]})}),(0,r.jsx)("main",{className:"flex-1 p-4 md:p-8",children:(0,r.jsx)(g.E,{className:"w-full h-96 rounded-lg"})})]})}},79551:e=>{"use strict";e.exports=require("url")},93608:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>o});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),l=s(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);s.d(t,d);let o={children:["",{children:["dashboard",{children:["rewards",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,29428)),"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/rewards/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,63144)),"/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"/Users/Terry/Downloads/zilvdaka-main 2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/Terry/Downloads/zilvdaka-main 2/src/app/dashboard/rewards/page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/rewards/page",pathname:"/dashboard/rewards",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,168,658,970,353,298],()=>s(93608));module.exports=r})();