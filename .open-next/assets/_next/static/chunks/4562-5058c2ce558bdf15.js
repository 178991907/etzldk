"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4562],{20061:(e,t,a)=>{a.d(t,{f:()=>r});var s=a(12115);let r=()=>(0,s.useCallback)(e=>{try{if("false"===localStorage.getItem("sound-effects-enabled"))return;new Audio("/sounds/".concat(e,".mp3")).play().catch(e=>{})}catch(t){console.error("Error playing sound: ".concat(e),t)}},[])},25439:(e,t,a)=>{a.d(t,{T:()=>r});var s=a(34477);let r=(0,s.createServerReference)("401faf5091786dd5b9af3a259c27aa22910dc6ed6f",s.callServer,void 0,s.findSourceMapURL,"updateUser")},44562:(e,t,a)=>{a.d(t,{A:()=>M});var s=a(95155),r=a(12115),l=a(30285),n=a(34301),o=a(8531),i=a(53764),d=a(13300),c=a(81008),m=a(18046),u=a(77223),f=a(60760),x=a(1978),h=a(20061),p=a(65079),g=a(54165),v=a(62523),j=a(85057),N=a(61588),w=a(25439),k=a(91218),y=a(59434),b=a(85005),C=a(12543),B=a(19968);let S=r.createContext(null);function I(){let e=r.useContext(S);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let A=r.forwardRef((e,t)=>{let{orientation:a="horizontal",opts:l,setApi:n,plugins:o,className:i,children:d,...c}=e,[m,u]=(0,b.A)({...l,axis:"horizontal"===a?"x":"y"},o),[f,x]=r.useState(!1),[h,p]=r.useState(!1),g=r.useCallback(e=>{e&&(x(e.canScrollPrev()),p(e.canScrollNext()))},[]),v=r.useCallback(()=>{null==u||u.scrollPrev()},[u]),j=r.useCallback(()=>{null==u||u.scrollNext()},[u]),N=r.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),v()):"ArrowRight"===e.key&&(e.preventDefault(),j())},[v,j]);return r.useEffect(()=>{u&&n&&n(u)},[u,n]),r.useEffect(()=>{if(u)return g(u),u.on("reInit",g),u.on("select",g),()=>{null==u||u.off("select",g)}},[u,g]),(0,s.jsx)(S.Provider,{value:{carouselRef:m,api:u,opts:l,orientation:a||((null==l?void 0:l.axis)==="y"?"vertical":"horizontal"),scrollPrev:v,scrollNext:j,canScrollPrev:f,canScrollNext:h},children:(0,s.jsx)("div",{ref:t,onKeyDownCapture:N,className:(0,y.cn)("relative",i),role:"region","aria-roledescription":"carousel",...c,children:d})})});A.displayName="Carousel";let R=r.forwardRef((e,t)=>{let{className:a,...r}=e,{carouselRef:l,orientation:n}=I();return(0,s.jsx)("div",{ref:l,className:"overflow-hidden",children:(0,s.jsx)("div",{ref:t,className:(0,y.cn)("flex","horizontal"===n?"":"-mt-4 flex-col",a),...r})})});R.displayName="CarouselContent";let z=r.forwardRef((e,t)=>{let{className:a,...r}=e,{orientation:l}=I();return(0,s.jsx)("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,y.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===l?"px-1":"pt-4",a),...r})});z.displayName="CarouselItem",r.forwardRef((e,t)=>{let{className:a,variant:r="outline",size:n="icon",...o}=e,{orientation:i,scrollPrev:d,canScrollPrev:c}=I();return(0,s.jsxs)(l.$,{ref:t,variant:r,size:n,className:(0,y.cn)("absolute  h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!c,onClick:d,...o,children:[(0,s.jsx)(C.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Previous slide"})]})}).displayName="CarouselPrevious",r.forwardRef((e,t)=>{let{className:a,variant:r="outline",size:n="icon",...o}=e,{orientation:i,scrollNext:d,canScrollNext:c}=I();return(0,s.jsxs)(l.$,{ref:t,variant:r,size:n,className:(0,y.cn)("absolute h-8 w-8 rounded-full","horizontal"===i?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",a),disabled:!c,onClick:d,...o,children:[(0,s.jsx)(B.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Next slide"})]})}).displayName="CarouselNext";let E=e=>{let t={modes:[{id:"work",name:"Work",duration:25},{id:"shortBreak",name:"Short Break",duration:5},{id:"longBreak",name:"Long Break",duration:15}],longBreakInterval:4};if(null==e?void 0:e.pomodoroSettings){var a;let s={...t,...e.pomodoroSettings,modes:(null==(a=e.pomodoroSettings.modes)?void 0:a.length)?e.pomodoroSettings.modes:t.modes};return s.modes.find(e=>"work"===e.id)||s.modes.unshift({id:"work",name:"Work",duration:25}),s.modes.find(e=>"shortBreak"===e.id)||s.modes.push({id:"shortBreak",name:"Short Break",duration:5}),s.modes.find(e=>"longBreak"===e.id)||s.modes.push({id:"longBreak",name:"Long Break",duration:15}),s}return t},L=e=>{var t;return{id:Date.now(),modeIndex:0,timeRemaining:60*((null==(t=e.modes[0])?void 0:t.duration)||0),isActive:!1,pomodoros:0}};function M(){let[e,t]=(0,r.useState)(E(null)),[a,u]=(0,r.useState)([]),[g,v]=(0,r.useState)(0),[j,b]=(0,r.useState)(!1),[C,B]=(0,r.useState)(!1),[S,I]=(0,r.useState)(),M=(0,h.f)(),{t:P}=(0,k.Bd)(),$=a[g],K=(0,r.useCallback)(async()=>{let e=E(await (0,N.w)());t(e),0===a.length&&u([L(e)])},[a.length]);(0,r.useEffect)(()=>(B(!0),K(),window.addEventListener("userProfileUpdated",K),()=>{window.removeEventListener("userProfileUpdated",K)}),[K]),(0,r.useEffect)(()=>{if(!S)return;let e=e=>{v(e.selectedScrollSnap())};return S.on("select",e),()=>{S.off("select",e)}},[S]),(0,r.useEffect)(()=>{if(a.length>1&&S){let e=a.length-1;g===e&&S.scrollTo(e)}},[a.length,S,g]);let T=(e,t)=>{u(a=>a.map((a,s)=>s===e?{...a,...t}:a))},U=(0,r.useCallback)(t=>{var s;let r=a[t];if(!r)return;M("timer-end");let l=e.modes[r.modeIndex],n=0,o=r.pomodoros;if((null==l?void 0:l.id)==="work"){let t=(o+=1)%e.longBreakInterval==0,a=e.modes.findIndex(e=>"longBreak"===e.id),s=e.modes.findIndex(e=>"shortBreak"===e.id);t&&-1!==a?n=a:-1!==s&&(n=s)}else{let t=e.modes.findIndex(e=>"work"===e.id);-1!==t&&(n=t)}let i=n>=0&&n<e.modes.length?n:0,d=60*((null==(s=e.modes[i])?void 0:s.duration)||0);T(t,{modeIndex:i,pomodoros:o,timeRemaining:d,isActive:!1})},[M,e,a]);(0,r.useEffect)(()=>{if(!$)return;let e=null;return $.isActive&&$.timeRemaining>0?e=setInterval(()=>{u(e=>e.map((e,t)=>t===g?{...e,timeRemaining:e.timeRemaining-1}:e))},1e3):$.isActive&&$.timeRemaining<=0&&U(g),()=>{e&&clearInterval(e)}},[$,g,U,u]);let W=()=>{let t=L(e),s=a.length;u(e=>[...e,t]),v(s)},F=e=>{a.length<=1||(u(a.filter((t,a)=>a!==e)),e===g?v(Math.max(0,e-1)):e<g&&v(g-1),b(!1))},J=async a=>{0===a.modes.length&&a.modes.push({id:"custom-".concat(Date.now()),name:"Work",duration:25}),a.longBreakInterval<1&&(a.longBreakInterval=1),await (0,w.T)({pomodoroSettings:a}),t(a),u(t=>t.map(t=>{var s,r;let l=null==(s=e.modes[t.modeIndex])?void 0:s.id,n=l?a.modes.findIndex(e=>e.id===l):-1;-1===n&&(n=0);let o=60*((null==(r=a.modes[n])?void 0:r.duration)||0);return{...t,modeIndex:n,timeRemaining:o,isActive:!1}})),b(!1)},O=(t,a)=>{let s=e.modes.findIndex(e=>e.id===a);if(-1!==s){var r;let a=60*((null==(r=e.modes[s])?void 0:r.duration)||0);T(t,{modeIndex:s,timeRemaining:a,isActive:!1})}},_=e=>{let t=Math.floor(e/60);return"".concat(String(t).padStart(2,"0"),":").concat(String(e%60).padStart(2,"0"))},H=e=>{if(!C)return e.name;let t={work:"pomodoro.settings.defaultModeFocus",shortBreak:"pomodoro.settings.defaultModeShortBreak",longBreak:"pomodoro.settings.defaultModeLongBreak"}[e.id],a=t?P(t):e.name;return a===t?e.name:a};return C?$?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-6 w-full",children:[(0,s.jsx)(A,{setApi:I,className:"w-full max-w-md",children:(0,s.jsxs)(R,{children:[a.map((t,a)=>{let r=e.modes[t.modeIndex],n=60*((null==r?void 0:r.duration)||0),m=n>0?(n-t.timeRemaining)/n*100:0;return(0,s.jsx)(z,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-6 text-center bg-card p-8 rounded-xl shadow-lg relative",children:[(0,s.jsx)("div",{className:"flex items-center gap-2 rounded-full bg-primary/10 p-1",children:e.modes.filter(e=>["work","shortBreak","longBreak"].includes(e.id)).map(e=>(0,s.jsx)(l.$,{variant:r.id===e.id?"default":"ghost",className:(0,y.cn)("rounded-full px-4 py-1.5 text-sm font-semibold transition-colors w-24",r.id===e.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-primary"),onClick:()=>O(a,e.id),children:H(e)},e.id))}),(0,s.jsxs)("div",{className:"relative h-64 w-64",children:[(0,s.jsx)(f.N,{mode:"wait",children:(0,s.jsx)(x.P.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.5,ease:"backInOut"},className:"absolute inset-0",children:(0,s.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 120 120",children:[(0,s.jsx)("circle",{className:"stroke-current text-muted",strokeWidth:"10",cx:"60",cy:"60",r:"50",fill:"transparent"}),(0,s.jsx)(x.P.circle,{className:"stroke-current text-primary",strokeWidth:"10",cx:"60",cy:"60",r:"50",fill:"transparent",strokeDasharray:"314.15",strokeDashoffset:314.15*(1-m/100),strokeLinecap:"round",transform:"rotate(-90 60 60)",initial:{strokeDashoffset:314.15},animate:{strokeDashoffset:314.15*(1-m/100)},transition:{duration:1,ease:"easeInOut"}})]})},"".concat(t.id,"-").concat(t.modeIndex))}),(0,s.jsx)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:(0,s.jsx)(f.N,{mode:"wait",children:(0,s.jsx)(x.P.span,{initial:{opacity:0,y:-15},animate:{opacity:1,y:0},exit:{opacity:0,y:15,position:"absolute"},transition:{duration:.3},className:"text-6xl font-bold font-mono text-foreground",children:_(t.timeRemaining)},"".concat(t.id,"-").concat(t.timeRemaining))})})]}),(0,s.jsxs)("div",{className:"flex w-full justify-center items-center gap-4 mt-4",children:[(0,s.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>{var s;return T(a,{isActive:!1,timeRemaining:60*((null==(s=e.modes[t.modeIndex])?void 0:s.duration)||0)})},className:"h-14 w-14 rounded-full",children:(0,s.jsx)(o.A,{className:"h-6 w-6"})}),(0,s.jsx)(l.$,{onClick:()=>T(a,{isActive:!t.isActive}),className:"w-32 h-16 rounded-full text-2xl font-bold",size:"lg",children:t.isActive?(0,s.jsx)(i.A,{className:"h-8 w-8"}):(0,s.jsx)(d.A,{className:"h-8 w-8"})}),(0,s.jsx)(l.$,{variant:"outline",size:"icon",onClick:()=>b(!0),className:"h-14 w-14 rounded-full",children:(0,s.jsx)(c.A,{className:"h-6 w-6"})})]})]})},t.id)}),(0,s.jsx)(z,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6 text-center bg-card p-8 rounded-xl shadow-lg h-[548px]",children:[(0,s.jsx)(l.$,{variant:"outline",className:"h-32 w-32 rounded-full border-dashed",onClick:W,children:(0,s.jsx)(n.A,{className:"h-16 w-16 text-muted-foreground"})}),(0,s.jsx)("p",{className:"text-muted-foreground",children:(0,s.jsx)(p.C,{tKey:"pomodoro.addTimer"})})]})})]})}),(0,s.jsxs)("div",{className:"flex gap-4 items-center justify-center mt-4",children:[a.map((e,t)=>(0,s.jsx)("button",{onClick:()=>null==S?void 0:S.scrollTo(t),children:(0,s.jsx)(x.P.div,{animate:{backgroundColor:t===g?"hsl(var(--primary))":"hsl(var(--muted))",scale:t===g?1.25:1},transition:{type:"spring",stiffness:500,damping:30},className:"h-3 w-8 rounded-full"})},t)),(0,s.jsx)("button",{onClick:()=>null==S?void 0:S.scrollTo(a.length),children:(0,s.jsx)(x.P.div,{animate:{backgroundColor:a.length===g?"hsl(var(--primary))":"hsl(var(--muted))",scale:a.length===g?1.25:1},transition:{type:"spring",stiffness:500,damping:30},className:"h-3 w-3 rounded-full",children:(0,s.jsx)(m.A,{className:"h-3 w-3 text-muted-foreground"})})})]})]}),C&&(0,s.jsx)(D,{isOpen:j,setIsOpen:b,settings:e,onSave:J,onDeleteCurrentTimer:()=>F(g),canDelete:a.length>1})]}):(0,s.jsx)("div",{className:"flex flex-col items-center gap-6 w-full",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-6 text-center bg-card p-8 rounded-xl shadow-lg h-[548px] w-full max-w-md",children:[(0,s.jsx)(l.$,{variant:"outline",className:"h-32 w-32 rounded-full border-dashed",onClick:W,children:(0,s.jsx)(n.A,{className:"h-16 w-16 text-muted-foreground"})}),(0,s.jsx)("p",{className:"text-muted-foreground",children:(0,s.jsx)(p.C,{tKey:"pomodoro.addTimer"})})]})}):(0,s.jsx)("div",{className:"flex flex-col items-center gap-6 w-full",children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center gap-6 text-center bg-card p-8 rounded-xl shadow-lg h-[548px] w-full max-w-md",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading Timer..."})})})}function D(e){let{isOpen:t,setIsOpen:a,settings:n,onSave:o,onDeleteCurrentTimer:i,canDelete:d}=e,[c,f]=(0,r.useState)(n),{t:x}=(0,k.Bd)(),[h,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{N(!0),f(n)},[n,t]);let w=e=>{if(!h)return e.name;let t={work:"pomodoro.settings.defaultModeWork",shortBreak:"pomodoro.settings.defaultModeShortBreak",longBreak:"pomodoro.settings.defaultModeLongBreak"}[e.id];return t?x(t):e.name},y=(e,t,a)=>{let s=[...c.modes],r=s[e];r&&(s[e]={...r,[t]:a},f({...c,modes:s}))},b=e=>{let t=c.modes.filter((t,a)=>a!==e);f({...c,modes:t})};return(0,s.jsx)(g.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(g.Cf,{className:"sm:max-w-md",children:[(0,s.jsxs)(g.c7,{children:[(0,s.jsx)(g.L3,{children:(0,s.jsx)(p.C,{tKey:"pomodoro.settings.title"})}),(0,s.jsx)(g.rr,{children:(0,s.jsx)(p.C,{tKey:"pomodoro.settings.description"})})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j.J,{children:(0,s.jsx)(p.C,{tKey:"pomodoro.settings.modes"})}),(0,s.jsx)("div",{className:"space-y-2 rounded-md border p-2",children:c.modes.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.p,{placeholder:x("pomodoro.settings.modeNamePlaceholder"),value:w(e),onChange:e=>y(t,"name",e.target.value),className:"h-9",disabled:["work","shortBreak","longBreak"].includes(e.id)}),(0,s.jsx)(v.p,{type:"number",placeholder:x("pomodoro.settings.minutesPlaceholder"),value:e.duration,onChange:e=>y(t,"duration",parseInt(e.target.value)||0),className:"w-24 h-9"}),(0,s.jsx)(l.$,{variant:"ghost",size:"icon",className:"h-9 w-9 text-destructive",onClick:()=>b(t),disabled:["work","shortBreak","longBreak"].includes(e.id),children:(0,s.jsx)(u.A,{className:"h-4 w-4"})})]},e.id))}),(0,s.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>{let e={id:"custom-".concat(Date.now()),name:"New Mode",duration:10};f({...c,modes:[...c.modes,e]})},children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)(p.C,{tKey:"pomodoro.settings.addMode"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j.J,{htmlFor:"longBreakInterval",children:(0,s.jsx)(p.C,{tKey:"pomodoro.settings.longBreakInterval"})}),(0,s.jsx)(v.p,{id:"longBreakInterval",type:"number",value:c.longBreakInterval,onChange:e=>f({...c,longBreakInterval:parseInt(e.target.value)||1})})]})]}),(0,s.jsxs)(g.Es,{className:"sm:justify-between",children:[(0,s.jsx)("div",{children:d&&(0,s.jsxs)(l.$,{variant:"destructive",onClick:i,children:[(0,s.jsx)(u.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)(p.C,{tKey:"pomodoro.deleteTimer"})]})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(g.HM,{asChild:!0,children:(0,s.jsx)(l.$,{type:"button",variant:"secondary",children:(0,s.jsx)(p.C,{tKey:"achievements.edit.cancel"})})}),(0,s.jsx)(l.$,{type:"button",onClick:()=>{o(c)},children:(0,s.jsx)(p.C,{tKey:"achievements.edit.save"})})]})]})]})})}},54165:(e,t,a)=>{a.d(t,{Cf:()=>f,Es:()=>h,HM:()=>m,L3:()=>p,c7:()=>x,lG:()=>i,rr:()=>g,zM:()=>d});var s=a(95155),r=a(12115),l=a(45821),n=a(25318),o=a(59434);let i=l.bL,d=l.l9,c=l.ZL,m=l.bm,u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=l.hJ.displayName;let f=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(n.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=l.UC.displayName;let x=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};x.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});p.displayName=l.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=l.VY.displayName},61588:(e,t,a)=>{a.d(t,{w:()=>r});var s=a(34477);let r=(0,s.createServerReference)("00ae0494fd0768734059b34c9a487b0bfb61256060",s.callServer,void 0,s.findSourceMapURL,"getUser")},85057:(e,t,a)=>{a.d(t,{J:()=>d});var s=a(95155),r=a(12115),l=a(40968),n=a(74466),o=a(59434);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,o.cn)(i(),a),...r})});d.displayName=l.b.displayName}}]);