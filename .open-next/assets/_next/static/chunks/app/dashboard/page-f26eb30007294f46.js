(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5105],{2393:(e,s,l)=>{"use strict";l.d(s,{A:()=>o});var t=l(95155),a=l(12115),r=l(1978),i=l(59434),n=l(20061),c=l(14003);let d={jump:{scale:[1,1.1,1],y:[0,-20,0],transition:{duration:.4,ease:"easeInOut"}},wiggle:{rotate:[0,-10,10,-10,0],transition:{duration:.5,ease:"easeInOut"}},spin:{rotate:[0,360],scale:[1,.8,1],transition:{duration:.5,ease:"circOut"}},bounce:{y:[0,-15,0,-8,0],transition:{duration:.6,ease:"easeOut"}}},o=e=>{let{petStyle:s,progress:l,className:o,fullSize:x=!1}=e,[u,f]=(0,a.useState)(null),m=(0,n.f)(),h=c.JZ[s]||c.JZ.pet1;return(0,t.jsx)("div",{className:(0,i.cn)("relative z-10 flex flex-col w-full h-full",o),children:(0,t.jsx)("div",{className:"flex flex-col items-center justify-center w-full h-full relative overflow-visible flex-grow",children:(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center rounded-lg cursor-pointer",onClick:e=>{m("click");let s=["jump","wiggle","spin","bounce"];f(s[Math.floor(Math.random()*s.length)])},children:(0,t.jsx)(r.P.div,{style:{scale:(.6+l/100*.3)*1.5*.4096,transition:"transform 0.5s ease"},animate:u?d[u]:{},onAnimationComplete:()=>f(null),className:(0,i.cn)("aspect-square flex items-center justify-center",x?"w-full max-h-full":"w-[60%] max-h-[80%]"),children:(0,t.jsx)(h,{})})})})})}},20061:(e,s,l)=>{"use strict";l.d(s,{f:()=>a});var t=l(12115);let a=()=>(0,t.useCallback)(e=>{try{if("false"===localStorage.getItem("sound-effects-enabled"))return;new Audio("/sounds/".concat(e,".mp3")).play().catch(e=>{})}catch(s){console.error("Error playing sound: ".concat(e),s)}},[])},24065:(e,s,l)=>{"use strict";l.d(s,{p:()=>d});var t=l(95155),a=l(24944),r=l(81203),i=l(89829),n=l(50594);let c={Target:r.A,Zap:i.A,Info:n.A};function d(e){let{iconName:s,title:l,value:r,description:i,progress:n}=e,d=c[s];return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between pb-2",children:[(0,t.jsx)("div",{className:"text-lg font-semibold leading-none tracking-tight",children:l}),d&&(0,t.jsx)(d,{className:"h-5 w-5 text-muted-foreground"})]}),(0,t.jsx)("div",{className:"text-2xl font-bold",children:r}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:i}),void 0!==n&&(0,t.jsx)(a.k,{value:n,className:"mt-2 h-2 w-full"})]})]})}},24944:(e,s,l)=>{"use strict";l.d(s,{k:()=>n});var t=l(95155),a=l(12115),r=l(55863),i=l(59434);let n=a.forwardRef((e,s)=>{let{className:l,value:a,...n}=e;return(0,t.jsx)(r.bL,{ref:s,className:(0,i.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",l),...n,children:(0,t.jsx)(r.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});n.displayName=r.bL.displayName},38101:(e,s,l)=>{"use strict";l.d(s,{K:()=>o});var t=l(12023),a=l(10366),r=l(61859),i=l(55859),n=l(78071),c=l(61781),d=l(2160);let o={Learning:t.A,Creative:a.A,Health:r.A,School:i.A,Activity:n.A,Bed:c.A,Gift:d.A}},47262:(e,s,l)=>{"use strict";l.d(s,{S:()=>c});var t=l(95155),a=l(12115),r=l(76981),i=l(10518),n=l(59434);let c=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)(r.bL,{ref:s,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",l),...a,children:(0,t.jsx)(r.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(i.A,{className:"h-4 w-4"})})})});c.displayName=r.bL.displayName},66137:(e,s,l)=>{Promise.resolve().then(l.bind(l,80778))},66695:(e,s,l)=>{"use strict";l.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>n,wL:()=>x});var t=l(95155),a=l(12115),r=l(59434);let i=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",l),...a})});i.displayName="Card";let n=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",l),...a})});n.displayName="CardHeader";let c=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",l),...a})});c.displayName="CardTitle";let d=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",l),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("p-6 pt-0",l),...a})});o.displayName="CardContent";let x=a.forwardRef((e,s)=>{let{className:l,...a}=e;return(0,t.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-6 pt-0",l),...a})});x.displayName="CardFooter"},79252:(e,s,l)=>{"use strict";l.d(s,{A:()=>n});var t=l(95155),a=l(12115),r=l(91218),i=l(68856);let n=()=>{let[e,s]=(0,a.useState)(new Date),[l,n]=(0,a.useState)(!1),{i18n:c,t:d}=(0,r.Bd)();if((0,a.useEffect)(()=>{n(!0);let e=setInterval(()=>{s(new Date)},1e3);return()=>{clearInterval(e)}},[]),!l)return(0,t.jsx)(i.E,{className:"h-12 w-[380px]"});let o=c.language.startsWith("zh")?"zh-CN":"en-US",x=e.toLocaleTimeString(o,{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}),u=e.toLocaleDateString(o,{year:"numeric",month:"long",day:"numeric"}),f="tasks.weekdaysFull.".concat(e.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase());return(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsxs)("div",{className:"text-xl font-medium text-muted-foreground",children:[u," ",d(f)]}),(0,t.jsx)("div",{className:"text-4xl font-bold font-mono text-foreground",children:x})]})}},80778:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>A});var t=l(95155),a=l(66695),r=l(50594),i=l(12115),n=l(68856),c=l(24065),d=l(79252),o=l(47262),x=l(15285),u=l(38101),f=l(59434),m=l(60760),h=l(1978),j=l(91218),p=l(65079),N=l(92349),g=l(20061);function w(e){let{tasks:s,setTasks:l}=e,{t:r}=(0,j.Bd)(),[c,d]=(0,i.useState)(!1),{i18n:w}=(0,j.Bd)(),v=(0,g.f)();(0,i.useEffect)(()=>{d(!0)},[]);let y=async(e,t)=>{t&&v("success"),await (0,x.WO)(e,t),l(s.map(s=>s.id===e.id?{...s,completed:t}:s))},b=s.filter(N.gf);return c?(0,t.jsxs)(a.Zp,{className:"h-full flex flex-col",children:[(0,t.jsx)(a.aR,{children:(0,t.jsx)(a.ZB,{children:(0,t.jsx)(p.C,{tKey:"dashboard.todaysAdventures"})})}),(0,t.jsx)(a.Wu,{className:"flex-grow pt-0 overflow-y-auto",children:(0,t.jsx)(m.N,{children:b.length>0?b.map((e,s)=>{let l=e.icon?u.K[e.icon]:null;return(0,t.jsxs)(h.P.div,{layout:!0,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95,transition:{duration:.2}},transition:{duration:.3,delay:.05*s,ease:"easeInOut"},className:"flex items-center p-3 -m-3 rounded-lg transition-colors hover:bg-muted/50",children:[(0,t.jsx)(o.S,{id:e.id.toString(),checked:e.completed,onCheckedChange:s=>y(e,!!s),className:"h-6 w-6 rounded-md",disabled:"paused"===e.status}),(0,t.jsx)("label",{htmlFor:e.id.toString(),className:(0,f.cn)("ml-4 flex-1 text-base font-medium transition-all",e.completed?"text-muted-foreground line-through":"text-foreground","paused"===e.status?"cursor-not-allowed":""),children:e.title}),(0,t.jsx)("div",{className:"flex items-center justify-center h-8 w-8 rounded-full bg-primary/10",children:l&&(0,t.jsx)(l,{className:"h-5 w-5 text-primary"})})]},e.id)}):(0,t.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,t.jsx)("p",{className:"text-muted-foreground text-center py-8",children:(0,t.jsx)(p.C,{tKey:"dashboard.noAdventures"})})})})})]}):(0,t.jsxs)(a.Zp,{className:"h-full",children:[(0,t.jsx)(a.aR,{children:(0,t.jsx)(n.E,{className:"h-6 w-48"})}),(0,t.jsxs)(a.Wu,{className:"space-y-4 pt-0",children:[(0,t.jsx)(n.E,{className:"h-10 w-full"}),(0,t.jsx)(n.E,{className:"h-10 w-full"}),(0,t.jsx)(n.E,{className:"h-10 w-full"})]})]})}var v=l(80751),y=l(55028),b=l(24944),k=l(2393);function C(e){let{user:s}=e;if(!s)return(0,t.jsx)(a.Zp,{className:"h-full flex flex-col",children:(0,t.jsxs)(a.Wu,{className:"p-6 flex-grow flex flex-col items-center justify-center",children:[(0,t.jsx)(n.E,{className:"w-full h-full min-h-[200px]"}),(0,t.jsxs)("div",{className:"mt-4 w-full",children:[(0,t.jsx)(n.E,{className:"h-6 w-24 mx-auto"}),(0,t.jsx)(n.E,{className:"h-4 w-16 mx-auto mt-2"}),(0,t.jsx)(n.E,{className:"h-2 w-full mt-4"})]})]})});let l=s.xp/s.xpToNextLevel*100;return(0,t.jsx)("div",{className:"h-full flex flex-col",children:(0,t.jsx)(a.Zp,{className:"h-full flex flex-col overflow-hidden",children:(0,t.jsxs)(a.Wu,{className:"flex flex-col p-0 h-full",children:[(0,t.jsx)("div",{className:"flex justify-center w-full flex-grow min-h-0 relative",children:(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(n.E,{className:"w-full h-full"}),children:(0,t.jsx)(k.A,{petStyle:s.petStyle,progress:l,className:"w-full h-full"})})}),(0,t.jsxs)("div",{className:"text-center w-full p-6 pt-0 mt-auto relative z-20 bg-background/50 backdrop-blur-sm",children:[(0,t.jsx)("p",{className:"text-lg font-bold",children:s.petName}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:(0,t.jsx)(p.C,{tKey:"user.level",tOptions:{level:s.level}})}),(0,t.jsx)(b.k,{value:l,className:"mt-4 h-2 w-full"})]})]})})})}let S=(0,y.default)(()=>Promise.all([l.e(2897),l.e(2593)]).then(l.bind(l,72593)),{loadableGenerated:{webpack:()=>[72593]},ssr:!1});function A(){let[e,s]=(0,i.useState)(null),[o,x]=(0,i.useState)([]),[u,f]=(0,i.useState)(!1),{t:m}=(0,j.Bd)();(0,i.useEffect)(()=>{f(!0),(async()=>{let{getStorageStatus:e}=await l.e(3905).then(l.bind(l,13905)),t=await e(),a=null,r=[];if("db"===t||"kv"===t){let{getUser:e,getTasks:s}=await l.e(3905).then(l.bind(l,13905));[a,r]=await Promise.all([e(),s()])}else{let{getClientUser:e,getClientTasks:s}=await Promise.resolve().then(l.bind(l,15285));[a,r]=await Promise.all([e(),s()])}s(a),x(r)})()},[]);let h=o.filter(e=>e.completed&&new Date(e.dueDate).toDateString()===new Date().toDateString()).length,N=o.filter(e=>new Date(e.dueDate).toDateString()===new Date().toDateString()).length,g=N>0?h/N*100:0,y=e?e.xp/e.xpToNextLevel*100:0,b=m("dashboard.petIntroDescription"),k=m("dashboard.petIntroItems",{returnObjects:!0});return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-background",children:[(0,t.jsxs)("header",{className:"sticky top-0 z-10 flex h-[57px] items-center justify-between gap-1 border-b bg-background px-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 w-1/2",children:[(0,t.jsx)(v.x2,{className:"md:hidden"}),(0,t.jsx)("h1",{className:"text-xl font-semibold truncate",children:(0,t.jsx)(p.C,{tKey:"dashboard.title"})})]}),(0,t.jsx)("div",{className:"flex items-center justify-end gap-4 w-1/2",children:u?(0,t.jsx)(d.A,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.E,{className:"h-9 w-24"}),(0,t.jsx)(n.E,{className:"h-9 w-32"})]})})]}),(0,t.jsx)("main",{className:"flex-grow p-4 md:p-8",children:(0,t.jsxs)(S,{isEditing:!1,children:[(0,t.jsx)("div",{children:(0,t.jsx)(C,{user:e})},"pet"),(0,t.jsx)("div",{children:(0,t.jsx)(w,{tasks:o,setTasks:x})},"tasks"),(0,t.jsx)("div",{children:(0,t.jsx)(a.Zp,{className:"h-full",children:(0,t.jsx)(a.Wu,{className:"p-4 h-full flex flex-col justify-center",children:(0,t.jsx)(c.p,{iconName:"Target",title:(0,t.jsx)(p.C,{tKey:"dashboard.dailyGoal"}),value:"".concat(Math.round(g),"%"),description:(0,t.jsx)(p.C,{tKey:"dashboard.dailyGoalDescription",tOptions:{completedTasks:h,totalTasks:N}})})})})},"dailyGoal"),(0,t.jsx)("div",{children:(0,t.jsx)(a.Zp,{className:"h-full",children:(0,t.jsx)(a.Wu,{className:"p-4 h-full flex flex-col justify-center",children:(0,t.jsx)(c.p,{iconName:"Zap",title:(0,t.jsx)(p.C,{tKey:"dashboard.xpGained"}),value:"".concat(e?e.xp:0," XP"),description:(0,t.jsx)(p.C,{tKey:"dashboard.xpToNextLevel",tOptions:{xp:e?e.xpToNextLevel-e.xp:"..."}}),progress:y})})})},"xpGained"),(0,t.jsx)("div",{children:(0,t.jsxs)(a.Zp,{className:"h-full",children:[(0,t.jsxs)(a.aR,{className:"flex flex-row items-start gap-4 pb-2",children:[(0,t.jsx)(r.A,{className:"h-6 w-6 text-primary mt-1 flex-shrink-0"}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(a.ZB,{children:(0,t.jsx)(p.C,{tKey:"dashboard.petIntroTitle"})})})]}),(0,t.jsx)(a.Wu,{className:"pt-0",children:u&&Array.isArray(k)?(0,t.jsxs)("div",{className:"text-sm text-muted-foreground",children:[b&&(0,t.jsx)("p",{className:"mb-3",children:b}),k.length>0&&(0,t.jsx)("ul",{className:"space-y-2 list-disc pl-5",children:k.map((e,s)=>(0,t.jsx)("li",{children:e},s))})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.E,{className:"h-4 w-full"}),(0,t.jsx)(n.E,{className:"h-4 w-full"}),(0,t.jsx)(n.E,{className:"h-4 w-3/4"})]})})]})},"petIntro")]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[7842,3741,6888,5079,8441,1684,7358],()=>s(66137)),_N_E=e.O()}]);