(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9358],{14400:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(95155),r=a(80751),l=a(66695),i=a(30285),d=a(62523),n=a(85057),o=a(65079),c=a(54165),m=a(34301),p=a(75943),x=a(77223),u=a(12115),h=a(91218),f=a(68856);function g(){let{t:e}=(0,h.Bd)(),[t,g]=(0,u.useState)([]),[w,y]=(0,u.useState)(!1),[j,N]=(0,u.useState)(null),[v,C]=(0,u.useState)(""),[b,k]=(0,u.useState)(""),[R,D]=(0,u.useState)(""),[K,q]=(0,u.useState)(""),[S,z]=(0,u.useState)(!1);(0,u.useEffect)(()=>{let e=async()=>{let{getStorageStatus:e}=await a.e(3905).then(a.bind(a,13905)),t=await e(),s=[];if("db"===t||"kv"===t){let{getRewards:e}=await a.e(3905).then(a.bind(a,13905));s=await e()}else{let{getClientRewards:e}=await Promise.resolve().then(a.bind(a,15285));s=await e()}g(s),z(!0)};e();let t=()=>{e()};return window.addEventListener("rewards-v1Updated",t),()=>{window.removeEventListener("rewards-v1Updated",t)}},[]);let A=e=>{let t=e.tasksRequired,a=e.daysRequired;return t&&t>0&&a&&a>0?{tKey:"settings.parentalControls.tasksAndDaysToComplete",tOptions:{tasksCount:t,daysCount:a}}:t&&t>0?{tKey:"settings.parentalControls.tasksToComplete",tOptions:{count:t}}:a&&a>0?{tKey:"settings.parentalControls.daysToComplete",tOptions:{count:a}}:{tKey:"settings.parentalControls.noRequirement"}},M=e=>{var t,a;N(e),C(e.title),k(e.description),D((null==(t=e.tasksRequired)?void 0:t.toString())||""),q((null==(a=e.daysRequired)?void 0:a.toString())||""),y(!0)},P=async()=>{if(!v.trim())return;let{getStorageStatus:e}=await a.e(3905).then(a.bind(a,13905)),t=await e(),s="db"===t||"kv"===t;if(j){let e={...j,title:v.trim(),description:b.trim(),tasksRequired:R?parseInt(R,10):void 0,daysRequired:K?parseInt(K,10):void 0};if(s){let{updateReward:t}=await a.e(3905).then(a.bind(a,13905));await t(e)}else{let{updateClientReward:t}=await Promise.resolve().then(a.bind(a,15285));await t(e)}}else{let e={id:"reward-".concat(Date.now()),userId:"user_2fP7sW5gR8zX9yB1eA6vC4jK0lM",title:v.trim(),description:b.trim(),icon:"Gift",tasksRequired:R?parseInt(R,10):void 0,daysRequired:K?parseInt(K,10):void 0};if(s){let{addReward:t}=await a.e(3905).then(a.bind(a,13905));await t(e)}else{let{addClientReward:t}=await Promise.resolve().then(a.bind(a,15285));await t(e)}}C(""),k(""),D(""),q(""),y(!1),N(null);let{getStorageStatus:r}=await a.e(3905).then(a.bind(a,13905)),l=await r();if("db"===l||"kv"===l){let{getRewards:e}=await a.e(3905).then(a.bind(a,13905));g(await e())}else{let{getClientRewards:e}=await Promise.resolve().then(a.bind(a,15285));g(await e())}},E=async e=>{let{getStorageStatus:t}=await a.e(3905).then(a.bind(a,13905)),s=await t();if("db"===s||"kv"===s){let{deleteReward:t}=await a.e(3905).then(a.bind(a,13905));await t(e);let{getRewards:s}=await a.e(3905).then(a.bind(a,13905));g(await s())}else{let{deleteClientReward:t}=await Promise.resolve().then(a.bind(a,15285));await t(e)}};return S?(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("header",{className:"sticky top-0 z-10 flex h-[57px] items-center justify-between gap-1 bg-background px-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 w-full",children:[(0,s.jsx)(r.x2,{className:"md:hidden"}),(0,s.jsx)("h1",{className:"text-xl font-semibold truncate",children:(0,s.jsx)(o.C,{tKey:"rewards.title"})})]})}),(0,s.jsx)("main",{className:"flex-1 p-4 md:p-8",children:(0,s.jsx)(l.Zp,{children:(0,s.jsxs)(l.Wu,{className:"space-y-4 pt-6",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(l.ZB,{children:(0,s.jsx)(o.C,{tKey:"settings.parentalControls.rewardSystem"})}),(0,s.jsx)(l.BT,{className:"mb-4",children:(0,s.jsx)(o.C,{tKey:"settings.parentalControls.rewardSystemDescription"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,s.jsxs)(c.lG,{open:w,onOpenChange:y,children:[(0,s.jsx)(c.zM,{asChild:!0,children:(0,s.jsxs)(i.$,{onClick:()=>{N(null),C(""),k(""),D(""),q(""),y(!0)},children:[(0,s.jsx)(m.A,{className:"mr-2 h-4 w-4"}),(0,s.jsx)(o.C,{tKey:"settings.parentalControls.addReward"})]})}),(0,s.jsxs)(c.Cf,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(c.c7,{children:[(0,s.jsx)(c.L3,{children:j?(0,s.jsx)(o.C,{tKey:"settings.parentalControls.editRewardDialog.title"}):(0,s.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.title"})}),(0,s.jsx)(l.BT,{children:(0,s.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.description"})})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(n.J,{htmlFor:"reward-name",className:"text-right",children:(0,s.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.rewardName"})}),(0,s.jsx)(d.p,{id:"reward-name",placeholder:e("settings.parentalControls.addRewardDialog.rewardNamePlaceholder"),className:"col-span-3",value:v,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(n.J,{htmlFor:"reward-description",className:"text-right",children:(0,s.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.rewardDescription"})}),(0,s.jsx)(d.p,{id:"reward-description",placeholder:e("settings.parentalControls.addRewardDialog.rewardDescriptionPlaceholder"),className:"col-span-3",value:b,onChange:e=>k(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(n.J,{htmlFor:"tasks-required",className:"text-right",children:(0,s.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.tasksRequired"})}),(0,s.jsx)(d.p,{id:"tasks-required",type:"number",placeholder:"5",className:"col-span-3",value:R,onChange:e=>D(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(n.J,{htmlFor:"days-required",className:"text-right",children:(0,s.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.daysRequired"})}),(0,s.jsx)(d.p,{id:"days-required",type:"number",placeholder:"3",className:"col-span-3",value:K,onChange:e=>q(e.target.value)})]})]}),(0,s.jsx)(c.Es,{children:(0,s.jsx)(i.$,{type:"submit",onClick:P,children:j?(0,s.jsx)(o.C,{tKey:"settings.parentalControls.editRewardDialog.saveButton"}):(0,s.jsx)(o.C,{tKey:"settings.parentalControls.addRewardDialog.createButton"})})})]})]})}),(0,s.jsx)("div",{className:"space-y-2 rounded-md border p-2",children:t.length>0?t.map((e,t)=>{let{tKey:a,tOptions:r}=A(e);return(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-muted/50 group",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:e.title}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.description&&e.description.trim()?e.description+" - ":""," ",(0,s.jsx)(o.C,{tKey:a,tOptions:r})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)(i.$,{variant:"ghost",size:"icon",onClick:()=>M(e),children:(0,s.jsx)(p.A,{className:"h-4 w-4"})}),(0,s.jsx)(i.$,{variant:"ghost",size:"icon",className:"text-destructive",onClick:()=>E(e.id),children:(0,s.jsx)(x.A,{className:"h-4 w-4"})})]})]},t)}):(0,s.jsx)("p",{className:"text-center text-muted-foreground p-4",children:(0,s.jsx)(o.C,{tKey:"settings.parentalControls.noRewards"})})})]})]})})})]}):(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("header",{className:"sticky top-0 z-10 flex h-[57px] items-center justify-between gap-1 bg-background px-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 w-full",children:[(0,s.jsx)(r.x2,{className:"md:hidden"}),(0,s.jsx)("h1",{className:"text-xl font-semibold truncate",children:(0,s.jsx)(o.C,{tKey:"rewards.title"})})]})}),(0,s.jsx)("main",{className:"flex-1 p-4 md:p-8",children:(0,s.jsx)(f.E,{className:"w-full h-96 rounded-lg"})})]})}},34301:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},40968:(e,t,a)=>{"use strict";a.d(t,{b:()=>d});var s=a(12115),r=a(63540),l=a(95155),i=s.forwardRef((e,t)=>(0,l.jsx)(r.sG.label,{...e,ref:t,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var d=i},54165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>x,Es:()=>h,HM:()=>m,L3:()=>f,c7:()=>u,lG:()=>n,rr:()=>g,zM:()=>o});var s=a(95155),r=a(12115),l=a(45821),i=a(25318),d=a(59434);let n=l.bL,o=l.l9,c=l.ZL,m=l.bm,p=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hJ,{ref:t,className:(0,d.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});p.displayName=l.hJ.displayName;let x=r.forwardRef((e,t)=>{let{className:a,children:r,...n}=e;return(0,s.jsxs)(c,{children:[(0,s.jsx)(p,{}),(0,s.jsxs)(l.UC,{ref:t,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...n,children:[r,(0,s.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=l.UC.displayName;let u=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};u.displayName="DialogHeader";let h=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};h.displayName="DialogFooter";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.hE,{ref:t,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});f.displayName=l.hE.displayName;let g=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.VY,{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...r})});g.displayName=l.VY.displayName},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>n,Zp:()=>i,aR:()=>d,wL:()=>m});var s=a(95155),r=a(12115),l=a(59434);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});i.displayName="Card";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});d.displayName="CardHeader";let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});n.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});o.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},70706:(e,t,a)=>{Promise.resolve().then(a.bind(a,14400))},75943:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},77223:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},85057:(e,t,a)=>{"use strict";a.d(t,{J:()=>o});var s=a(95155),r=a(12115),l=a(40968),i=a(74466),d=a(59434);let n=(0,i.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,d.cn)(n(),a),...r})});o.displayName=l.b.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[7842,5079,8441,1684,7358],()=>t(70706)),_N_E=e.O()}]);